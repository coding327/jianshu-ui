"use strict";(self["webpackChunkjianshu_ui"]=self["webpackChunkjianshu_ui"]||[]).push([[349],{7349:function(e,a,o){o.r(a),o.d(a,{default:function(){return m}});var l=function(){var e=this,a=e._self._c;return a("div",[a("el-form",{ref:"formRef",attrs:{model:e.formModel,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"avatar",label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,name:"myfile",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.formModel.avatar?a("img",{staticClass:"avatar",attrs:{src:e.formModel.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{prop:"username",label:"用户名"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入用户名"},model:{value:e.formModel.username,callback:function(a){e.$set(e.formModel,"username",a)},expression:"formModel.username"}})],1)],1),a("el-form-item",{attrs:{prop:"sex",label:"性别"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.formModel.sex,callback:function(a){e.$set(e.formModel,"sex",a)},expression:"formModel.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.formModel.sex,callback:function(a){e.$set(e.formModel,"sex",a)},expression:"formModel.sex"}},[e._v("女")]),a("el-radio",{attrs:{label:"保密"},model:{value:e.formModel.sex,callback:function(a){e.$set(e.formModel,"sex",a)},expression:"formModel.sex"}},[e._v("保密")])],1),a("el-form-item",{attrs:{prop:"desc",label:"个人简介"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"请填写您的个人简介"},model:{value:e.formModel.desc,callback:function(a){e.$set(e.formModel,"desc",a)},expression:"formModel.desc"}})],1)],1),a("el-form-item",{attrs:{prop:"phone",label:"手机号"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.formModel.phone,callback:function(a){e.$set(e.formModel,"phone",a)},expression:"formModel.phone"}})],1)],1),a("el-form-item",{attrs:{prop:"email",label:"电子邮箱"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.formModel.email,callback:function(a){e.$set(e.formModel,"email",a)},expression:"formModel.email"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"success",round:"",loading:e.loading},on:{click:function(a){return e.save(e.$refs.formRef)}}},[e._v("更 新")])],1)],1)],1)},r=[],t=o(1351),s={data(){return{formModel:{_id:"",avatar:"",username:"",sex:"",desc:"",phone:"",email:""},loading:!1}},computed:{action(){return(0,t.n)()?"/api/upload":"/upload"},headers(){return{Authorization:`Bearer ${(0,t.gf)()}`}}},methods:{beforeAvatarUpload(e){const a="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&o},handleAvatarSuccess(e,a){this.formModel.avatar=e.data.url},save(e){e&&e.validate((async e=>{if(e){this.loading=!0;try{this.$store.dispatch("loginModule/updateUserInfoAction",this.formModel)}finally{this.loading=!1}}}))}},created(){const{_id:e,avatar:a,username:o,sex:l,desc:r,phone:t,email:s}=this.$store.state.loginModule.userInfo;this.formModel={_id:e,avatar:a,username:o,sex:l,desc:r,phone:t,email:s}}},n=s,i=o(1656),d=(0,i.A)(n,l,r,!1,null,"31820cbd",null),m=d.exports}}]);
//# sourceMappingURL=349.0dfdf14c.js.map