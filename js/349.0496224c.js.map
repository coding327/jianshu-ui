{"version":3,"file":"js/349.0496224c.js","mappings":"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","sources":["webpack://jianshu-ui/./src/views/user/personal.vue","webpack://jianshu-ui/src/views/user/personal.vue","webpack://jianshu-ui/./src/views/user/personal.vue?a354","webpack://jianshu-ui/./src/views/user/personal.vue?30dd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-form',{ref:\"formRef\",attrs:{\"model\":_vm.formModel,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"avatar\",\"label\":\"头像\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.action,\"name\":\"myfile\",\"headers\":_vm.headers,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.formModel.avatar)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.formModel.avatar}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":\"用户名\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"disabled\":\"\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.formModel.username),callback:function ($$v) {_vm.$set(_vm.formModel, \"username\", $$v)},expression:\"formModel.username\"}})],1)],1),_c('el-form-item',{attrs:{\"prop\":\"sex\",\"label\":\"性别\"}},[_c('el-radio',{attrs:{\"label\":\"男\"},model:{value:(_vm.formModel.sex),callback:function ($$v) {_vm.$set(_vm.formModel, \"sex\", $$v)},expression:\"formModel.sex\"}},[_vm._v(\"男\")]),_c('el-radio',{attrs:{\"label\":\"女\"},model:{value:(_vm.formModel.sex),callback:function ($$v) {_vm.$set(_vm.formModel, \"sex\", $$v)},expression:\"formModel.sex\"}},[_vm._v(\"女\")]),_c('el-radio',{attrs:{\"label\":\"保密\"},model:{value:(_vm.formModel.sex),callback:function ($$v) {_vm.$set(_vm.formModel, \"sex\", $$v)},expression:\"formModel.sex\"}},[_vm._v(\"保密\")])],1),_c('el-form-item',{attrs:{\"prop\":\"desc\",\"label\":\"个人简介\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"3\",\"placeholder\":\"请填写您的个人简介\"},model:{value:(_vm.formModel.desc),callback:function ($$v) {_vm.$set(_vm.formModel, \"desc\", $$v)},expression:\"formModel.desc\"}})],1)],1),_c('el-form-item',{attrs:{\"prop\":\"phone\",\"label\":\"手机号\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"请输入手机号\"},model:{value:(_vm.formModel.phone),callback:function ($$v) {_vm.$set(_vm.formModel, \"phone\", $$v)},expression:\"formModel.phone\"}})],1)],1),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":\"电子邮箱\"}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"请输入电子邮箱\"},model:{value:(_vm.formModel.email),callback:function ($$v) {_vm.$set(_vm.formModel, \"email\", $$v)},expression:\"formModel.email\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.save(_vm.$refs.formRef)}}},[_vm._v(\"更 新\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-form ref=\"formRef\" :model=\"formModel\" label-width=\"80px\">\n      <el-form-item prop=\"avatar\" label=\"头像\">\n        <el-upload\n          class=\"avatar-uploader\"\n          :action=\"action\"\n          name=\"myfile\"\n          :headers=\"headers\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <img v-if=\"formModel.avatar\" :src=\"formModel.avatar\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n      <el-form-item prop=\"username\" label=\"用户名\">\n        <el-col :span=\"6\">\n          <el-input\n            v-model=\"formModel.username\"\n            disabled\n            placeholder=\"请输入用户名\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"sex\" label=\"性别\">\n        <el-radio v-model=\"formModel.sex\" label=\"男\">男</el-radio>\n        <el-radio v-model=\"formModel.sex\" label=\"女\">女</el-radio>\n        <el-radio v-model=\"formModel.sex\" label=\"保密\">保密</el-radio>\n      </el-form-item>\n      <el-form-item prop=\"desc\" label=\"个人简介\">\n        <el-col :span=\"6\">\n          <el-input\n            v-model=\"formModel.desc\"\n            type=\"textarea\"\n            rows=\"3\"\n            placeholder=\"请填写您的个人简介\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"phone\" label=\"手机号\">\n        <el-col :span=\"6\">\n          <el-input\n            v-model=\"formModel.phone\"\n            placeholder=\"请输入手机号\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item prop=\"email\" label=\"电子邮箱\">\n        <el-col :span=\"6\">\n          <el-input\n            v-model=\"formModel.email\"\n            placeholder=\"请输入电子邮箱\"\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"success\"\n          round\n          @click=\"save($refs.formRef)\"\n          :loading=\"loading\"\n          >更 新</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { isDevMode, getToken } from \"@/utils/config\";\n\nexport default {\n  data() {\n    return {\n      formModel: {\n        _id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        desc: \"\",\n        phone: \"\",\n        email: \"\",\n      },\n      loading: false,\n    };\n  },\n  computed: {\n    action() {\n      return isDevMode() ? \"/api/upload\" : \"/upload\";\n    },\n    headers() {\n      return {\n        Authorization: `Bearer ${getToken()}`,\n      };\n    },\n  },\n  methods: {\n    beforeAvatarUpload(file) {\n      // 限制上传头像图片可以是 JPG | png 格式，且大小不能超过 2MB\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n    handleAvatarSuccess(res, file) {\n      this.formModel.avatar = res.data.url;\n    },\n    save(formEl) {\n      if (!formEl) return;\n      formEl.validate(async (valid) => {\n        if (!valid) return;\n        this.loading = true;\n        try {\n          this.$store.dispatch(\"loginModule/updateUserInfoAction\", this.formModel);\n        } finally {\n          this.loading = false;\n        }\n      });\n    },\n  },\n  created() {\n    const { _id, avatar, username, sex, desc, phone, email } =\n      this.$store.state.loginModule.userInfo;\n    this.formModel = { _id, avatar, username, sex, desc, phone, email };\n  },\n};\n</script>\n<style scoped>\n:deep(.avatar-uploader .el-upload) {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n:deep(.avatar-uploader .el-upload:hover) {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./personal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./personal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./personal.vue?vue&type=template&id=31820cbd&scoped=true\"\nimport script from \"./personal.vue?vue&type=script&lang=js\"\nexport * from \"./personal.vue?vue&type=script&lang=js\"\nimport style0 from \"./personal.vue?vue&type=style&index=0&id=31820cbd&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31820cbd\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","attrs","formModel","staticClass","action","headers","handleAvatarSuccess","beforeAvatarUpload","avatar","model","value","username","callback","$$v","$set","expression","sex","_v","desc","phone","email","loading","on","$event","save","$refs","formRef","staticRenderFns","data","_id","computed","isDevMode","Authorization","getToken","methods","file","isJPG","type","isLt2M","size","$message","error","res","url","formEl","validate","valid","$store","dispatch","created","state","loginModule","userInfo","component"],"sourceRoot":""}